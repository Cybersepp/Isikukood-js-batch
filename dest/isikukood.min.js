// isikukood.js, https://github.com/dknight/Isikukood-js
var ik=(()=>{var h=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,g=(n,e)=>{for(var t in e)h(n,t,{get:e[t],enumerable:!0})},f=(n,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of u(e))!E.call(n,s)&&s!==t&&h(n,s,{get:()=>e[s],enumerable:!(o=d(e,s))||o.enumerable});return n},b=n=>f(h({},"__esModule",{value:!0}),n),c={};g(c,{Isikukood:()=>l});class l{constructor(e){this.code=e}get code(){return this._code}set code(e){this._code=String(e)}static get GENDER(){return{MALE:"male",FEMALE:"female",UNKNOWN:"unknown"}}getControlNumber(e){e||(e=this.code);const t=[1,2,3,4,5,6,7,8,9,1],o=[3,4,5,6,7,8,9,1,2,3];let s=0,i=0;for(let r=0;r<10;++r)i+=e.charAt(r)*t[r];if(s=i%11,i=0,s===10){for(let r=0;r<10;++r)i+=e.charAt(r)*o[r];s=i%11,s===10&&(s=0)}return s}validate(){if(this.code.charAt(0)==="0"||this.code.length!==11||this.getControlNumber()!==parseInt(this.code.charAt(10)))return!1;const t=Number(this.code.substring(1,3)),o=Number(this.code.substring(3,5)),s=Number(this.code.substring(5,7)),i=this.getBirthday();return t===i.getFullYear()%100&&i.getMonth()+1===o&&s===i.getDate()}getGender(){const e=this.code.charAt(0);let t="";switch(e){case"1":case"3":case"5":t=this.constructor.GENDER.MALE;break;case"2":case"4":case"6":t=this.constructor.GENDER.FEMALE;break;default:t=this.constructor.GENDER.UNKNOWN}return t}getAge(){return Math.floor((new Date().getTime()-this.getBirthday().getTime())/864e5/365.25)}getBirthday(){let e=parseInt(this.code.substring(1,3));const t=parseInt(this.code.substring(3,5).replace(/^0/,""))-1,o=this.code.substring(5,7).replace(/^0/,""),s=this.code.charAt(0);return s==="1"||s==="2"?e+=1800:s==="3"||s==="4"?e+=1900:s==="5"||s==="6"?e+=2e3:(s==="7"||s==="8")&&(e+=2100),new Date(e,t,o)}parse(e){return e||(e=this.code),{gender:this.getGender(),birthDay:this.getBirthday(),age:this.getAge()}}static generate(e={}){let t,o,s,i=e.gender||(Math.round(Math.random())===0?this.GENDER.MALE:this.GENDER.FEMALE),r="";const a=["00","01","02","22","27","37","42","47","49","52","57","60","65","70","95"];if(![this.GENDER.MALE,this.GENDER.FEMALE].includes(i))return"";if(e.birthYear?t=e.birthYear:t=Math.round(Math.random()*100+1900+(new Date().getFullYear()-2e3)),e.birthMonth?o=e.birthMonth:o=Math.floor(Math.random()*12)+1,e.birthDay)s=e.birthDay;else{var M=new Date(t,o,0).getDate();s=Math.floor(Math.random()*M)+1}if(i===this.GENDER.MALE&&t>=1800&&t<=1899)r+="1";else if(i===this.GENDER.FEMALE&&t>=1800&&t<=1899)r+="2";else if(i===this.GENDER.MALE&&t>=1900&&t<=1999)r+="3";else if(i===this.GENDER.FEMALE&&t>=1900&&t<=1999)r+="4";else if(i===this.GENDER.MALE&&t>=2e3&&t<=2099)r+="5";else if(i===this.GENDER.FEMALE&&t>=2e3&&t<=2099)r+="6";else if(i===this.GENDER.MALE&&t>=2100&&t<=2199)r+="7";else if(i===this.GENDER.FEMALE&&t>=2100&&t<=2199)r+="8";else return"";return r+=String(t).substring(2,4),r+=String(o).length===1?"0"+o:o,r+=String(s).length===1?"0"+s:s,r+=a[Math.floor(Math.random()*a.length)],r+=Math.floor(Math.random()*10),r+=this.prototype.getControlNumber(r),r}static generatePersonalCodes(e){let t=[];for(let r=0;r<e;r++){const a=l.generate();t.includes(a)?r--:t.push([a])}let o="data:text/csv;charset=utf-8,"+t.map(r=>r.join(",")).join(`
`);var s=encodeURI(o),i=document.createElement("a");i.setAttribute("href",s),i.setAttribute("download","generated_personal_codes.csv"),document.body.appendChild(i),i.click()}}return b(c)})();window.Isikukood=ik.Isikukood;
//# sourceMappingURL=isikukood.min.js.map
